<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>My first three.js app</title>
  <link rel="stylesheet" type="text/css" href="styles.css" />
</head>

<body>
  <div id="container"></div>

  <p class="content">
    Lorem ipsum dolor sit amet consectetur adipisicing elit. At a consectetur
    iusto temporibus, perferendis eaque minus velit eos nam molestias pariatur
    reiciendis aliquid ipsa iste. Id pariatur explicabo esse provident
    cupiditate cumque? Veritatis voluptates officiis doloremque illo assumenda
    id ad, aperiam quaerat, nam est molestiae placeat, totam numquam eveniet
    dolores cumque iusto velit ex eius soluta nesciunt. Maxime sunt veniam
    incidunt aut vero rerum corporis aliquam iure dolores, ipsam velit, libero
    dolorem dignissimos fugit odio aliquid quaerat similique! Ipsa magni
    incidunt ullam, fugit alias sint voluptatibus assumenda temporibus quaerat
    culpa tempora eligendi pariatur suscipit illo vitae, enim nihil! Sequi
    voluptates, id, impedit repellendus soluta dolorum dicta, eum rem eligendi
    doloremque excepturi hic aliquam ad? Nostrum error maxime, corrupti
    maiores debitis eius ut reprehenderit perspiciatis repellat! Quibusdam
    itaque, perspiciatis atque eius fuga quia incidunt exercitationem quisquam
    velit quaerat ex nostrum voluptatem? Pariatur doloremque fugiat hic, quis
    exercitationem magni nobis, minima cupiditate ipsam, velit culpa dolores
    adipisci? Deserunt sed unde, voluptas error repellendus sunt recusandae
    sequi distinctio nam repudiandae maxime corrupti illo veniam ducimus nemo
    eos explicabo aliquid harum non nesciunt reprehenderit quam excepturi.
    Voluptas, accusamus? Minima modi aperiam nesciunt ipsum et voluptas,
    corrupti porro ducimus repellendus quas fuga culpa at autem, ipsa ea ullam
    vitae. Quod obcaecati cumque eius reprehenderit consectetur, omnis libero
    fuga! A incidunt reiciendis recusandae corrupti labore in inventore
    laborum pariatur beatae iste est aspernatur magnam, quos aliquam
    perspiciatis accusantium porro nihil ducimus deserunt placeat sint commodi
    expedita facere. Totam placeat voluptas neque aliquid asperiores
    voluptates dolores architecto unde, in at reiciendis omnis assumenda
    doloribus velit rem fuga ipsam ipsa optio sunt est ut suscipit? Minus
    laboriosam aperiam sunt est voluptatem, voluptas eos cum voluptatibus,
    obcaecati saepe repellat et nemo asperiores necessitatibus labore fugit
    pariatur facilis accusantium quis omnis? Reprehenderit facere eveniet non
    commodi mollitia libero quibusdam animi, quia quisquam fugit ipsum,
    laborum sit minus. Cumque fugit, corporis perferendis ea sit facilis
    pariatur consequuntur laboriosam nemo omnis odit aperiam earum ducimus
    repellendus! Facere, dolore, porro consectetur suscipit sed laborum
    necessitatibus, praesentium odio unde animi maxime. Beatae, animi culpa?
    Facere, tempore! Cupiditate similique pariatur laudantium, impedit,
    voluptate est expedita voluptatem aspernatur porro molestiae sit? Expedita
    illo laudantium nobis eum saepe veritatis commodi, assumenda eius. Velit
    quia, officia eveniet quam, pariatur harum consequuntur veritatis corrupti
    aut consectetur mollitia enim reiciendis iusto nam optio quis cupiditate
    quisquam, molestias animi ratione cumque officiis exercitationem expedita.
    In harum dolores perferendis aperiam alias, nostrum, voluptatum molestiae
    assumenda autem, nam impedit modi natus minus unde commodi. Cumque eaque
    debitis adipisci non illum? Molestias, iure! Veniam ab velit repellendus
    adipisci, deleniti amet similique vero quo molestias possimus nisi harum
    voluptatum quod nostrum? Architecto aspernatur eligendi officiis itaque.
    Illo tempora eius culpa veritatis nisi consequatur praesentium voluptatem
    exercitationem ut cum perspiciatis, adipisci sint saepe ea expedita!
    Eligendi facere minima voluptatibus veritatis placeat aperiam doloremque.
    Officiis perspiciatis ipsam obcaecati est voluptatum reiciendis soluta eos
    consectetur consequuntur fugit, reprehenderit, praesentium ex in natus!
    Officiis nam, eligendi minus velit expedita non corrupti, sit minima porro
    illum iusto, similique deleniti aspernatur et! Eveniet natus ullam cumque
    nostrum ratione quas! Quisquam sint minima quae ullam repellat odit
    accusantium ipsam quaerat unde iste ab totam assumenda, facilis molestias
    hic amet explicabo ad excepturi animi natus ex quam, voluptatibus
    laboriosam? Vitae deserunt necessitatibus perspiciatis minus optio quos,
    laudantium obcaecati veritatis, eligendi in explicabo nulla. Sed quidem
    deserunt harum similique velit maiores illum hic modi maxime eligendi
    dolores odit culpa asperiores, aspernatur quibusdam? Nobis a totam,
    doloremque id eveniet quibusdam nesciunt odio sit. Autem porro fugit
    necessitatibus ullam, dolores architecto vero eius cumque deserunt quod
    accusamus ratione maxime, expedita quos. Quasi accusamus aspernatur optio!
    Natus incidunt corrupti voluptatem est necessitatibus obcaecati delectus,
    ex tenetur explicabo ab, veniam itaque deserunt, animi consectetur laborum
    culpa? Voluptatem consequatur voluptate itaque in consequuntur quaerat
    nisi blanditiis fugit, ad, unde consectetur velit, sint ipsa. Alias,
    deleniti aperiam! Cumque, labore fugiat velit architecto quasi deserunt
    rerum quaerat iste ab odio, optio nostrum dolore possimus molestias magni
    ea consequuntur aut adipisci doloremque omnis repellendus? Quasi quibusdam
    perspiciatis praesentium aut doloremque ab explicabo consequatur. Natus
    nihil cumque iste, architecto in soluta ea consectetur, tempora nisi
    quibusdam voluptates? Magnam ea modi neque hic corporis, commodi
    assumenda. Quibusdam hic sequi voluptates nostrum ducimus consequatur
    ipsam vero cumque accusantium iusto cum dolore perferendis qui harum
    recusandae dolorem commodi saepe quam corrupti quisquam mollitia,
    doloribus nihil molestias. Architecto, quia distinctio. Sunt cupiditate
    fugiat distinctio voluptatum culpa ab nisi quos. Accusamus dignissimos
    illum dolor quam quisquam delectus iure laborum sequi quidem omnis ut,
    suscipit dolore praesentium, inventore voluptas deleniti nobis numquam.
    Repellat quod repellendus quaerat deserunt beatae doloremque excepturi
    dignissimos, accusantium enim? Omnis tempora officia tenetur sequi, ab
    dolorum fugit sint vel distinctio itaque dolore nemo consequatur explicabo
    dicta illum eveniet quis doloremque soluta! Fuga, maxime quidem. Non
    consequuntur, alias commodi aliquam ratione magnam, rerum dolorum quia
    illo a sit odio soluta laborum quaerat? Assumenda voluptate quas
    repellendus odio vitae totam, voluptates aspernatur ipsa, magnam nihil
    deserunt ipsam, itaque fugiat qui architecto eius! Qui quidem reiciendis
    maiores mollitia vitae? Commodi nisi itaque repellendus laborum libero
    adipisci ipsam in sunt earum aut sequi ea, est, quasi, quisquam optio
    maiores consectetur explicabo nam ut? Magni error ipsa ut soluta cumque
    iste, facere dolorum modi similique distinctio quas voluptas commodi et
    deserunt ex, hic dolore, a exercitationem impedit animi? Quis ipsam iste
    recusandae ex, fugiat aut repellendus fugit tempora? Aspernatur, veritatis
    magni atque necessitatibus ipsum praesentium itaque distinctio ea eveniet
    maxime reprehenderit quo commodi, cum alias neque. Optio quae quo
    reprehenderit quod fugiat unde nisi, ex voluptatum corporis modi, eius
    perspiciatis reiciendis officia aperiam dolor repellendus excepturi
    expedita recusandae distinctio molestias asperiores facilis. Dicta aliquid
    quia cupiditate officiis vero explicabo quis vitae nisi neque velit
    obcaecati, exercitationem ipsum temporibus eveniet, ea non magni doloribus
    illo aliquam. Illum accusamus quibusdam laboriosam rem! Pariatur ullam
    consequuntur dolores quidem magni reprehenderit quod id placeat
    voluptatem? Aliquid doloribus perferendis accusamus dolore totam esse,
    quos quisquam cum libero consequuntur hic nesciunt, suscipit ratione
    pariatur architecto, veritatis praesentium. Est ab saepe vero praesentium
    in modi neque voluptatibus.
  </p>

  <p class="content">
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Cum maiores iure
    accusantium magni esse corrupti, laboriosam non labore dolores recusandae
    perspiciatis odit, atque architecto eaque totam deleniti distinctio
    nesciunt tempore! Consequatur dolore illum aspernatur magnam ratione
    officiis. Accusamus est doloribus excepturi molestiae soluta distinctio
    corrupti maiores. Porro, accusamus assumenda. Cum quisquam, itaque vitae
    assumenda tempora alias ea rerum aut quidem vel blanditiis molestiae. Amet
    earum natus veritatis mollitia aliquam corporis autem, expedita assumenda
    nam odio voluptatum neque animi obcaecati blanditiis molestias ut, vero
    veniam. Facere beatae accusantium nemo explicabo ipsa a illum, rerum unde
    maxime ipsum ab eveniet eaque voluptatibus sunt, hic, quasi fugit corrupti
    culpa fuga dolor. Id ratione repudiandae, esse perferendis iure nostrum
    quisquam aliquid voluptates fugit rem cum provident modi ea harum aliquam
    vitae itaque amet quasi sit dolorum ex minus voluptatum! Reprehenderit,
    accusantium magni, et quia porro dolorem fugit ut quam earum delectus ad
    esse. Vero nulla, dolorem asperiores nam eveniet dolore! Culpa, ducimus
    fugit voluptatem consequatur recusandae rem sit. Recusandae, totam fuga
    assumenda nulla, ipsam officia quibusdam voluptatibus repudiandae soluta
    maxime cupiditate! Repudiandae officiis deleniti culpa soluta dolor facere
    reiciendis cum minima aliquam mollitia voluptatibus architecto odio
    tempora ipsum alias rem blanditiis distinctio nesciunt, modi nulla iste
    quia dolore, ut corporis! Vitae voluptate pariatur, aliquid iste
    blanditiis suscipit eligendi molestiae repudiandae id fugiat expedita ut
    corrupti autem non ex. Sint corrupti quisquam quia! Quaerat libero quia
    aut repellendus, mollitia laborum dolorem aperiam aliquam labore voluptate
    vero facere deleniti molestiae iure voluptatibus rem, modi nesciunt.
    Soluta quam quas vel ad consectetur suscipit amet necessitatibus, quidem
    libero qui quisquam officia eum officiis facilis, accusantium autem
    veritatis dolores repellat sunt, nobis quibusdam distinctio eaque maxime.
    Sunt cum, quis nisi aliquam soluta incidunt. Quaerat ratione cum
    laudantium nostrum dolorum? Quis asperiores impedit, alias saepe corrupti
    est praesentium harum nisi consequuntur beatae optio? Itaque eaque
    molestias id ad aut illo quae nemo eius? Mollitia, laboriosam vero
    dignissimos magni fugit delectus vitae pariatur ullam facere, earum
    quisquam atque, et sed hic fugiat sequi velit? Cumque iste dolores officia
    quod voluptates recusandae dolor nisi nam sint? Consequuntur, in ea enim
    fugit doloribus maiores beatae amet cum dolores? Exercitationem eaque vero
    harum recusandae ad molestias officiis, error voluptas at soluta dicta
    adipisci nemo dolor corporis quis assumenda animi mollitia maxime
    blanditiis, alias repellat voluptate sed illo? Accusantium illo delectus
    cumque voluptas, animi nemo, repellendus praesentium laborum possimus
    quaerat commodi esse eligendi dignissimos voluptate recusandae a rerum
    maiores odio accusamus in? Enim magnam voluptatum, dolore praesentium
    pariatur eveniet laboriosam dolorem, voluptates voluptas assumenda eum
    odio excepturi nihil doloremque a! Fugiat eveniet minima, asperiores quo
    ducimus beatae accusamus numquam? Placeat deleniti, dicta minima ut
    nostrum obcaecati eaque, dolorum assumenda ea veritatis eveniet iste
    architecto maxime? Unde, vero doloremque sit blanditiis modi possimus!
    Illo doloremque ex, quod nisi tempora dolor nam reprehenderit maiores
    itaque? Quo cum nobis iste quod repellendus obcaecati vel molestiae
    perspiciatis alias, earum non harum quas praesentium, nisi necessitatibus
    perferendis quae reprehenderit quidem. Enim saepe quis, placeat tenetur
    amet officia est veniam voluptas earum! Accusamus sint natus, deleniti
    tempora blanditiis iste, totam explicabo quisquam esse quam saepe libero
    inventore similique eveniet excepturi architecto. Consequatur placeat
    veritatis nihil aperiam temporibus, eius nesciunt nemo distinctio iste
    libero fugiat debitis, in accusantium quos sint exercitationem non
    explicabo eum beatae amet quia cupiditate? Inventore ducimus dicta
    suscipit non! Recusandae dicta sapiente deserunt iure beatae ipsam labore
    inventore quam libero soluta sit facilis dolorum, animi commodi ab velit
    asperiores consectetur enim error cumque natus aliquid reprehenderit?
    Vitae incidunt adipisci officiis veniam aliquam ea odit ab temporibus
    ratione. Unde cupiditate quisquam nulla odio libero obcaecati?
    Consequatur, ipsum. Illo et aliquam adipisci praesentium harum, ipsam
    accusamus alias! Nemo reprehenderit magnam quis. Architecto soluta
    excepturi corporis ea quidem adipisci quod amet nemo non esse voluptatibus
    assumenda, inventore quasi! Qui accusantium adipisci totam at, vitae
    maxime, enim sunt iste ratione tempora libero? Quod eaque expedita
    perferendis illo vitae adipisci laudantium, consectetur accusantium dolor
    possimus dicta deleniti fuga! Asperiores, consequuntur deleniti.
    Perspiciatis pariatur repellat laborum dicta veniam maxime ab quis earum,
    quidem officiis exercitationem quos asperiores minus inventore. Doloribus
    minus, eos debitis blanditiis nesciunt deserunt eveniet esse asperiores at
    corrupti quisquam sint incidunt expedita iusto accusantium hic quasi nobis
    explicabo cum, vero tenetur. Enim placeat excepturi aliquam, tempore eum
    quibusdam! Iusto architecto saepe, modi velit optio fuga dolorem
    repudiandae sit nihil porro consectetur accusamus assumenda! Sapiente,
    molestias cumque mollitia repudiandae, voluptas asperiores praesentium,
    aut saepe tempora reprehenderit dicta et explicabo dignissimos qui vero!
    Ut laborum placeat nam neque, expedita quidem aspernatur eaque. Est
    mollitia voluptas blanditiis iste voluptatibus adipisci, atque dolor iure
    sit consectetur vel quia, nobis animi tempora impedit hic? Obcaecati ad,
    libero natus maiores voluptatibus illum voluptas facilis in eum! Soluta
    temporibus quia, molestias sit eum eveniet ut odio autem placeat qui
    officia, saepe tempora voluptatem. Optio cupiditate provident eligendi at
    voluptas laudantium, veritatis minima vero id consectetur soluta illum
    nulla ullam facere, ratione earum est. Nam nostrum quaerat dolore facere,
    amet dolorum laborum doloremque nemo explicabo suscipit officia
    perspiciatis aliquid maxime a earum fugiat eligendi eius id quisquam ab
    iste magnam provident corrupti expedita. Officia voluptatem praesentium
    vero asperiores at provident totam dolorem dolores adipisci, animi
    sapiente et pariatur dolor! Earum quidem molestiae deserunt distinctio,
    harum ipsum quia consequatur magni ut atque deleniti sequi temporibus
    quaerat excepturi placeat quae incidunt accusantium obcaecati? Iusto odio
    doloremque soluta ad delectus vel quam inventore labore ut, vero
    perspiciatis excepturi alias doloribus consectetur ipsam omnis,
    exercitationem tenetur, minima dolorem voluptas aliquam. Numquam, laborum
    explicabo rem illum asperiores voluptatibus consequuntur exercitationem.
    Earum eligendi blanditiis aperiam ea porro officia eaque iste, deserunt
    quibusdam similique a harum facere id pariatur, mollitia eos commodi
    doloremque saepe unde modi quae laudantium iure dolor corporis! Nobis
    consectetur sit est ipsa labore eveniet cumque culpa optio, molestias
    quod, veniam ducimus debitis. Nesciunt recusandae cupiditate nam
    dignissimos, maiores illum iusto officia totam quibusdam placeat corporis
    consectetur exercitationem. Consequatur facilis necessitatibus numquam in!
    Dolor suscipit vel nulla explicabo nihil veniam perferendis fugit. Porro
    quas ullam eos doloremque tempore rem illum magnam illo sequi.
  </p>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/ScrollTrigger.min.js"></script>

  <script type="module">
    // Adding Libraries
    import * as THREE from "./modules/three.module.js";
    import { OrbitControls } from "./modules/OrbitControls.js";
    // import gsap from "./modules/gsap.module.js";

    let scrollY = 0;
    document.addEventListener("scroll", () => {
      scrollY = window.pageYOffset;
    });

    // const container = document.getElementById("container");
    // let offsetTopContainerY = container.offsetTop;
    // console.log("offsetTopContainerY: ", offsetTopContainerY);

    const height = document.querySelector("#container").offsetHeight;
    console.log("Height: ", height);

    let scene, camera, renderer, controls;

    const init = () => {
      // Create sceen and camera
      scene = new THREE.Scene();
      camera = new THREE.PerspectiveCamera(
        75,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      );

      // Create renderer
      const container = document.getElementById("container");
      renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      container.appendChild(renderer.domElement);

      camera.position.set(0, 0, 1);

      // Add controls
      // controls = new OrbitControls(camera, renderer.domElement);
      // controls.autoRotate = true; // Call controls.update in animate() to make it work
      // controls.autoRotateSpeed = 0.7;
      // controls.enableDamping = true;
      // controls.enableZoom = true;

      // Create a sphere and add it to the scene
      const geometry = new THREE.SphereGeometry(50, 32, 32);
      const textures = new THREE.TextureLoader().load(
        "./images/360_industrial_sunset.jpg"
      );
      textures.wrapS = THREE.RepeatWrapping;
      textures.repeat.x = -1;
      const material = new THREE.MeshBasicMaterial({
        map: textures,
        side: THREE.DoubleSide,
      });
      const sphere = new THREE.Mesh(geometry, material);
      scene.add(sphere);

      const onResize = () => {
        renderer.setSize(window.innerWidth, window.innerHeight);
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
      };

      gsap.registerPlugin(ScrollTrigger);
      gsap.to(sphere.rotation, {
        scrollTrigger: {
          trigger: "#container",
          start: "top top",
          end: `${height}+=150px 60%`,
          markers: true,
          scrub: true,
          toggleActions: "restart pause reverse reset"
        },
        x: 1.2,
      });

      const animate = () => {
        requestAnimationFrame(animate);

        // sphere.rotation.x = scrollY / 700.0;
        sphere.rotation.y += 0.002;

        // console.log("sphere.rotation.x: ", sphere.rotation.x);
        // console.log("sphere.rotation.y: ", sphere.rotation.y);
        // controls.update();
        renderer.render(scene, camera);
      };

      animate();
    };

    init();
  </script>
</body>

</html>